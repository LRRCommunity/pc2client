<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>LRRmans Map Viewer</title>
	<style type="text/css">
		svg {
			position: fixed;
		}
	</style>
</head>
<body>
	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="95%" viewBox="0 0 402.83658 831.26788">
		<g id="lemans-track" color="#C0272D">
			<path fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"
				d="M 398.4819,829.1907 c -1.1,-0.18777 -8.3,-2.30718 -16,-4.7098 -17.81888,-5.56 -74.48504,-22.55152 -85,-25.48751 -7.30281,-2.03909
				-21.57329,-8.69894 -37,-17.26743 -3.3,-1.83293 -15.80977,-8.63834 -27.79949,-15.12314 -19.54463,-10.57096 -36.0338,-21.48448
				-46.60474,-30.8458 -1.42767,-1.26431 -4.39577,-3.63679 -6.59577,-5.27219 -2.2,-1.6354 -4.225,-3.20101 -4.5,-3.47914 -0.275,-0.27813
				-3.42184,-2.75569 -6.99297,-5.50569 -3.57113,-2.75 -7.21712,-5.675 -8.10219,-6.5 -0.88507,-0.825 -5.69871,-4.875 -10.69697,-9
				-10.08988,-8.32705 -11.95618,-11.20247 -15.25274,-23.5 -2.36357,-8.81707 -4.25803,-12.5 -6.42986,-12.5 -0.78575,0 -8.31287,2.97336
				-16.72695,6.60747 -21.328302,9.21186 -24.903832,10.56602 -26.391342,9.99521 -1.36258,-0.52287 -2.32275,-3.766 -4.32332,-14.60268
				-2.53738,-13.74451 -14.17667,-68.67094 -15.2573,-72 -1.12812,-3.47535 -4.34488,-10.68997 -12.0384,-27 -5.59066,-11.85201
				-10.78796,-23.68452 -10.78796,-24.56057 C 41.981898,547.0445 32.922102,531.4901 28.911855,526 23.765951,518.95517 14.087479,499.09053
				10.153839,487.5 6.8141321,477.6595 4.7963511,462.03644 2.9857911,432 c -1.390295,-23.06443 -1.25962,-35.75626 0.42799,-41.5685
				2.53692,-8.73732 2.780446,-13.60272 1.147992,-22.93568 -2.156905,-12.33131 -2.212703,-74.08519 -0.08764,-96.99582 1.786152,-19.25678
				1.882421,-26.15042 0.378172,-27.08009 -1.554513,-0.96075 -0.09197,-43.29628 3.141597,-90.93854 C 9.8106451,125.71414
				16.585365,109.20586 32.621167,92.47095 40.260958,84.498099 48.037548,79.864192 83.754168,62.00186 106.34629,50.703258
				120.54043,43.039141 121.38926,41.680821 c 0.74954,-1.199452 1.66558,-4.622957 2.03564,-7.60779 0.70743,-5.705949 3.957,-11.561884
				5.78798,-10.430281 0.59292,0.366447 0.79661,0.210908 0.45264,-0.345643 -0.34396,-0.55655 2.39901,-2.969127 6.09549,-5.361283
				C 142.93504,13.293207 173.63487,2 179.08149,2 c 1.59523,0 3.82612,0.925707 4.95754,2.057127 1.73356,1.733564 8.9271,12.214829
				12.44147,18.127714 3.6726,6.179097 7.24289,11.997876 10.01068,16.315159 15.84518,24.715804 25.22539,41.469231 28.60955,51.09777
				2.03733,5.79656 10.23204,32.57537 13.74074,44.90223 4.66336,16.3834 14.90416,51.39868 20.32643,69.5 2.22416,7.425 5.07612,17.1
				6.33768,21.5 1.26156,4.4 5.29856,18.125 8.9711,30.5 3.67255,12.375 8.83937,29.925 11.48183,39 2.64247,9.075 6.62474,22.575 8.84951,30
				2.22476,7.425 9.95779,33.75 17.18451,58.5 7.22672,24.75 14.26819,48.825 15.64772,53.5 1.37953,4.675 4.00827,13.675 5.84165,20
				1.83338,6.325 4.4667,15.325 5.85183,20 1.38512,4.675 4.76876,16.15 7.5192,25.5 2.75044,9.35 7.25749,24.65 10.01566,34 2.75817,9.35
				9.34479,31.85 14.63693,50 5.29214,18.15 10.74539,36.6 12.11833,41 2.15338,6.90113 2.61809,10.95321 3.38319,29.5 1.3632,33.04566
				4.15602,153.36939 3.79535,163.51605 -0.29783,8.37846 -0.46192,8.9919 -2.32049,8.67465 z m -0.94152,-72.8591 C 394.80839,644.28726
				394.56008,638.93158 391.63674,629 c -1.37607,-4.675 -5.95037,-20.2 -10.1651,-34.5 -4.21474,-14.3 -10.55449,-35.9 -14.08833,-48
				-3.53385,-12.1 -8.02917,-27.4 -9.98961,-34 -1.96043,-6.6 -5.51613,-18.75 -7.90155,-27 -4.20161,-14.53133 -8.53592,-29.35723
				-14.03266,-48 -1.45949,-4.95 -3.70182,-12.6 -4.98296,-17 -1.28114,-4.4 -3.45069,-11.825 -4.82122,-16.5 -1.37053,-4.675 -4.06234,-13.9
				-5.9818,-20.5 -1.91945,-6.6 -6.87047,-23.475 -11.00226,-37.5 -4.13179,-14.025 -9.63082,-32.7 -12.22007,-41.5 -2.58924,-8.8
				-6.49938,-22.075 -8.6892,-29.5 -2.18982,-7.425 -5.02635,-17.1 -6.30341,-21.5 -1.27706,-4.4 -5.31656,-18.125 -8.97667,-30.5
				-3.66011,-12.375 -7.69906,-26.1 -8.97544,-30.5 -1.27639,-4.4 -3.52263,-12.05 -4.99164,-17 -2.73844,-9.22749 -9.9147,-33.74756
				-14.04809,-48 -1.27606,-4.4 -3.25717,-11.0375 -4.40247,-14.75 -1.1453,-3.7125 -2.93107,-9.5625 -3.96839,-13 -4.25558,-14.102284
				-7.94434,-21.654575 -20.36808,-41.701133 -4.95912,-8.001877 -9.03068,-15.091572 -9.0479,-15.754878 -0.0172,-0.663307 -0.35917,-1.003391
				-0.75987,-0.755744 -0.4007,0.247647 -0.98873,-0.227758 -1.30673,-1.056456 -0.5158,-1.344133 -3.27061,-5.74737 -12.74203,-20.366572
				-1.56244,-2.411631 -2.55457,-4.886631 -2.20475,-5.5 0.34982,-0.613369 0.28849,-0.802318 -0.13628,-0.419885 -0.42478,0.382432
				-2.18443,-1.417568 -3.91033,-4 -4.15537,-6.217597 -6.8685,-6.440035 -20.53375,-1.683475 -5.69642,1.982795 -10.9986,3.358925
				-11.78263,3.058067 -0.79022,-0.303238 -1.15322,-0.10647 -0.81454,0.44153 C 152.825,12.555154 152.48698,13 151.73726,13 c -2.20854,0
				-11.84342,5.071981 -17.4902,9.207171 -5.87531,4.302537 -7.73182,7.277207 -8.55416,13.706254 -0.31049,2.427384 -1.39768,5.577384
				-2.41598,7 -1.22554,1.71214 -11.23394,7.31951 -29.604792,16.586575 -15.26434,7.7 -32.02147,16.177865 -37.23808,18.8397 -26.19163,13.36459
				-42.538094,36.5344 -44.560026,63.1603 -1.679,22.10998 -3.8786619,59.35428 -3.8389249,65 0.02323,3.3 -0.494486,12.20767 -1.150473,19.79483
				-0.951061,10.99998 -0.937708,14.27129 0.06591,16.14656 1.019255,1.9045 0.951741,6.80686 -0.355012,25.77827 -2.039407,29.60807
				-2.137212,83.89434 -0.177532,98.53789 0.754997,5.64165 1.228178,11.04165 1.051512,12 -3.783055,20.52169 -3.851886,21.6994
				-2.629721,44.99453 1.465317,27.92973 3.753557,50.96057 5.7810259,58.18526 3.222419,11.48278 13.608812,33.82471 19.321786,41.56266
				6.056911,8.20379 11.348665,17.734 16.189105,29.15585 2.74106,6.46801 7.70463,17.40394 11.03015,24.30208 10.08838,20.92635
				10.41827,22.12273 22.29598,80.85754 2.92692,14.4735 5.51474,26.50853 5.75071,26.74451 0.23598,0.23597 9.32533,-3.39349 20.198582,-8.06547
				C 116.28036,671.82253 126.22569,668 127.50785,668 c 3.36216,0 5.23886,2.35002 7.03662,8.81132 0.87053,3.12877 2.26706,8.15234
				3.10339,11.16348 1.62349,5.84521 5.99662,10.90892 17.33404,20.07134 3.025,2.44468 6.01154,4.92629 6.63675,5.51469 0.62521,0.5884
				4.82616,3.96542 9.33543,7.50449 4.50928,3.53907 12.09774,9.52655 16.86325,13.3055 21.23908,16.84213 25.32405,19.4353 57.66457,36.60589
				5.5,2.92012 10.45,5.63194 11,6.02626 1.61238,1.15601 15.39778,8.51776 24.02992,12.83259 4.38354,2.19115 13.37008,5.58812 19.97008,7.54883
				6.6,1.96071 21.675,6.47883 33.5,10.04027 11.825,3.56144 26.225,7.89781 32,9.63638 5.775,1.73857 15.225,4.62453 21,6.41326 5.775,1.78872
				10.89078,2.90048 11.3684,2.47056 0.49043,-0.44145 0.13792,-30.74024 -0.80992,-69.61326 z" />
		</g>
		<use xlink:href="#sporty-car" id="lrrcedes" transform="translate(5.86 212.598) rotate(2.734)" />
		<defs>
			<g id="sporty-car" color="#5282FF" transform="scale(0.075) matrix(0 -1 1 0 -600 600)">
				<path fill="currentColor"
					d="M1150,599.814h-0.012c-0.134-8.221-4.703-19.436-8.237-24.737c-3.587-5.381-20.446-65.643-26.544-83.219
					s-23.316-69.589-39.099-80.708c-15.783-11.12-62.201-30.934-75.328-33.36c-11-2.033-71.502-4.902-85.85-3.707
					c-14.348,1.196-171.222,5.5-190.352,6.457c-19.13,0.957-133.917,1.435-133.917,1.435s-15.304-19.609-18.174-19.609
					c-2.87,0-8.609-0.956-8.609,6.217c0,7.174,4.304,14.826,4.304,14.826s-203.735-3.116-225.744-3.826
					c-14.827-0.478-84.512-4.091-132.721,5.5c-45.675,9.087-75.089,16.022-101.872,32.762c-26.783,16.74-43.045,70.067-47.349,84.415
					s-9.804,65.284-10.283,73.414c-0.428,7.268-0.091,21.406-0.015,24.326c-0.076,2.92-0.413,17.057,0.015,24.326
					c0.479,8.131,5.978,59.066,10.283,73.415s20.566,67.676,47.349,84.415c26.783,16.739,56.197,23.674,101.872,32.761
					c48.209,9.591,117.895,5.978,132.721,5.5c22.01-0.71,225.744-3.826,225.744-3.826s-4.304,7.652-4.304,14.826
					s5.739,6.217,8.609,6.217c2.87,0,18.174-19.609,18.174-19.609s114.786,0.478,133.917,1.435c19.13,0.956,176.004,5.261,190.352,6.457
					c14.348,1.195,74.85-1.674,85.85-3.707c13.127-2.425,59.545-22.24,75.328-33.359c15.783-11.12,33.001-63.132,39.099-80.708
					c6.098-17.577,22.957-77.839,26.544-83.219c3.534-5.302,8.103-16.517,8.237-24.737H1150c0-0.061-0.005-0.125-0.005-0.186
					C1149.995,599.939,1150,599.875,1150,599.814z M376.517,441.299l6.388-9.542c2.945-4.401,7.757-7.195,13.04-7.573
					c20.631-1.475,74.074-5.33,99.241-7.474c24.66-2.102,71.321-3.437,90.558-3.921c1.372-0.034,1.685,1.906,0.372,2.302
					c-21.25,6.405-77.544,23.054-97.028,25.652c-20.198,2.693-87.702,5.261-109.528,6.039
					C376.687,446.883,374.918,443.687,376.517,441.299z M89.312,447.019c2.87-6.815,6.995-10.94,19.55-22.778
					c12.555-11.837,50.218-23.316,52.011-23.316c0,0-34.973,22.06-45.017,31.129s-10.941,14.964-18.832,23.394
					c-7.892,8.429-12.017,10.402-12.017,10.402S86.442,453.835,89.312,447.019z M108.861,775.759
					c-12.555-11.837-16.68-15.962-19.55-22.778c-2.87-6.815-4.304-18.832-4.304-18.832s4.125,1.973,12.017,10.402
					c7.892,8.43,8.788,14.325,18.832,23.394c10.044,9.069,45.017,31.13,45.017,31.13C159.079,799.075,121.416,787.596,108.861,775.759z
					 M315.654,600.545h-0.017c-0.12,6.971-0.831,45.702-2.135,59.173c-1.435,14.827-14.108,66.959-31.805,84.176
					c-17.695,17.218-42.566,23.914-42.566,23.914s-38.979-11.001-57.632-38.023c-18.653-27.022-25.114-65.293-26.454-75.31
					c-1.01-7.548-2.83-46.893-3.149-53.929h-0.05c0,0,0.009-0.191,0.025-0.545c-0.016-0.354-0.025-0.545-0.025-0.545h0.05
					c0.32-7.037,2.139-46.382,3.149-53.93c1.34-10.018,7.801-48.288,26.454-75.31c18.653-27.022,57.632-38.023,57.632-38.023
					s24.871,6.696,42.566,23.914c17.697,17.218,30.37,69.349,31.805,84.176c1.304,13.471,2.015,52.201,2.135,59.173h0.017
					c0,0-0.003,0.192-0.009,0.545C315.65,600.353,315.654,600.545,315.654,600.545z M350.921,767.936l-29.931-4.082
					c-0.979-0.133-1.147-1.475-0.233-1.848c2.326-0.949,5.578-2.184,8.618-3.017c3.976-1.09,10.52-1.538,13.926-1.705
					c1.375-0.067,2.678,0.588,3.455,1.725l5.082,7.444C352.304,767.135,351.74,768.047,350.921,767.936z M351.838,433.547l-5.082,7.443
					c-0.777,1.138-2.08,1.793-3.455,1.725c-3.406-0.167-9.95-0.615-13.926-1.705c-3.039-0.833-6.291-2.069-8.618-3.017
					c-0.914-0.373-0.746-1.714,0.233-1.848l29.931-4.082C351.74,431.953,352.304,432.864,351.838,433.547z M585.744,787.212
					c-19.237-0.484-65.898-1.819-90.558-3.921c-25.167-2.145-78.61-6-99.241-7.475c-5.283-0.378-10.095-3.172-13.04-7.573l-6.388-9.542
					c-1.599-2.389,0.17-5.584,3.043-5.482c21.826,0.778,89.33,3.346,109.528,6.039c19.484,2.598,75.778,19.246,97.028,25.652
					C587.429,785.306,587.116,787.247,585.744,787.212z M748.969,575.674c0.628,6.278,0.157,20.797,0.029,24.326
					c0.128,3.529,0.599,18.047-0.029,24.326c-0.578,5.784-2.401,22.293-3.085,28.474c-0.164,1.482,0.43,2.946,1.581,3.896
					c4.806,3.965,7.074,10.226,5.902,16.345c-2.795,14.606-8.5,41.705-14.921,56.744c-2.99,7.004-8.855,16.365-15.38,25.773
					c-16.208,23.372-45.498,33.828-72.836,25.979c-24.671-7.083-53.279-15.203-66.983-18.751c-17.936-4.644-39.518-10.039-51.82-13.097
					c-5.363-1.333-8.557-6.826-7.063-12.146c5.833-20.765,18.794-70.594,19.904-107c0.427-14.031,0.643-22.46,0.734-27.382
					c-0.09,0.157-0.255-2.616-0.255-2.616h0.297c0.002-0.19,0.004-0.372,0.005-0.545c-0.001-0.173-0.003-0.355-0.005-0.545l-0.297,0
					c0,0,0.165-2.773,0.255-2.617c-0.091-4.921-0.307-13.351-0.734-27.382c-1.11-36.405-14.071-86.234-19.904-107
					c-1.494-5.321,1.7-10.813,7.063-12.146c12.302-3.058,33.884-8.452,51.82-13.097c13.704-3.549,42.312-11.668,66.983-18.752
					c27.337-7.849,56.628,2.607,72.836,25.979c6.525,9.408,12.391,18.769,15.38,25.773c6.421,15.039,12.126,42.138,14.921,56.744
					c1.171,6.119-1.097,12.38-5.902,16.345c-1.151,0.949-1.745,2.413-1.581,3.896C746.568,553.381,748.391,569.89,748.969,575.674z
					 M1079.053,749.718c-1.734,1.037-3.497,1.904-5.261,2.635c2.111,1.067,3.833,2.535,4.985,4.461
					c5.391,9.015-3.179,24.063-19.143,33.61c-15.964,9.547-33.276,9.978-38.667,0.963c-5.391-9.015,3.179-24.063,19.143-33.61
					c3.857-2.307,7.79-4.068,11.616-5.307c-1.461-0.951-2.67-2.167-3.556-3.649c-4.711-7.878,1.476-20.249,13.822-27.632
					c12.345-7.383,26.172-6.982,30.883,0.896C1097.587,729.964,1091.399,742.335,1079.053,749.718z M1092.875,477.914
					c-4.711,7.878-18.538,8.279-30.883,0.896c-12.345-7.383-18.533-19.754-13.822-27.632c0.886-1.482,2.096-2.698,3.556-3.649
					c-3.826-1.238-7.76-3-11.616-5.306c-15.964-9.547-24.534-24.595-19.143-33.61c5.391-9.015,22.703-8.584,38.667,0.963
					c15.964,9.547,24.534,24.595,19.143,33.61c-1.152,1.926-2.875,3.394-4.985,4.461c1.763,0.731,3.527,1.597,5.261,2.635
					C1091.399,457.665,1097.587,470.036,1092.875,477.914z" />
			</g>
		</defs>
	</svg>
	<script>
	(function() {
		var ajaxRequest;
		
		function sendRequest() {
			ajaxRequest = new XMLHttpRequest();
			ajaxRequest.timeout = 1000;
			ajaxRequest.onreadystatechange = stateChanged;
			ajaxRequest.responseType = "json";
			ajaxRequest.open("GET", "/carPosition")
			ajaxRequest.send();
		}
		
		function stateChanged() {
			if (ajaxRequest.readyState === XMLHttpRequest.DONE && ajaxRequest.status === 200) {
				var sourceMatrix = ajaxRequest.response.transformMatrix;
				var car = document.getElementById("lrrcedes");
				
				var destMatrix = car.ownerSVGElement.createSVGMatrix();
				destMatrix.a = sourceMatrix.M11;
				destMatrix.b = sourceMatrix.M12;
				destMatrix.c = sourceMatrix.M21;
				destMatrix.d = sourceMatrix.M22;
				destMatrix.e = sourceMatrix.M31;
				destMatrix.f = sourceMatrix.M32;
				
				var transformation = car.ownerSVGElement.createSVGTransformFromMatrix(destMatrix);
				
				var transformList = car.transform.baseVal;
				transformList.clear();
				transformList.appendItem(transformation);
			}
		}
		
		sendRequest();
		setInterval(sendRequest, 2000);
	})();
	</script>
</body>
</html>
